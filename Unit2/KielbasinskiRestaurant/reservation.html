<!-- reservation.html -->
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make a Reservation - Atlas Restaurant</title>
    <link rel="icon" type="image/x-icon" href="logo.png">
    <!-- Match Bootstrap version used across site -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar sticky-top bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="./index.html">
                <img src="logo.png" alt="Logo" width="30" height="30" class="d-inline-block align-text-top">
                Atlas Restaurant
            </a>
            <div class="d-flex">
                <a class="me-3 nav-link" href="./menu.html">Menu</a>
                <a class="me-3 nav-link" href="./reservation.html">Make a Reservation</a>
            </div>
    </nav>

    <main class="container py-5">
        <div class="reservation-card card shadow-lg">
            <div class="card-body p-4">
                <h1 class="card-title text-center mb-4">Make a Reservation</h1>
                <form id="reservationForm">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" id="name" name="name" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" id="email" name="email" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label for="date" class="form-label">Date</label>
                            <input type="date" id="date" name="date" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label for="time" class="form-label">Time</label>
                            <input type="time" id="time" name="time" class="form-control" required>
                        </div>
                        <div class="col-12">
                            <label for="guests" class="form-label">Number of Guests</label>
                            <input type="number" id="guests" name="guests" min="1" class="form-control" required>
                        </div>
                        <div class="col-12 d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">Send Reservation</button>
                        </div>
                    </div>
                </form>

                <div id="confirmation" class="alert alert-success mt-4 text-center" style="display:none;">
                    Thank you! Your reservation has been received. Please check your email for confirmation.
                </div>
            </div>
        </div>
    </main>

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        (function () {
            emailjs.init('q2S9KyKGzs4DtamJM'); // Replace with your EmailJS user ID
        })();

        document.getElementById('reservationForm').addEventListener('submit', function (e) {
            e.preventDefault();
            var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            var dateValue = document.getElementById('date').value;
            var formattedDate = dateValue ? new Date(dateValue).toLocaleDateString("en-US", options) : '';

            emailjs.send('service_x691x9i', 'template_9gujbyq', {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                date: formattedDate,
                time: document.getElementById('time').value,
                guests: document.getElementById('guests').value
            })
                .then(function (response) {
                    document.getElementById('reservationForm').style.display = 'none';
                    document.getElementById('confirmation').style.display = 'block';
                }, function (error) {
                    alert('Failed to send reservation. Please try again.');
                });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>